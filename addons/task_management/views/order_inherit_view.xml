<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Mở rộng Form View của Đơn hàng để hiển thị Task liên quan -->
    <record id="view_order_form_inherit_task" model="ir.ui.view">
        <field name="name">khach_hang.order.form.inherit.task</field>
        <field name="model">khach_hang.order</field>
        <field name="inherit_id" ref="customer_management.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Công việc liên quan" name="tasks">
                    <field name="task_ids" readonly="1">
                        <tree>
                            <field name="name"/>
                            <field name="user_id" widget="many2one_avatar_user"/>
                            <field name="deadline"/>
                            <field name="progress" widget="progressbar"/>
                            <field name="state" widget="badge" 
                                   decoration-success="state == 'done'" 
                                   decoration-warning="state == 'in_progress'"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
